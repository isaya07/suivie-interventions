import{_ as M}from"./CyJ7lqwL.js";import{_ as j}from"./TrVZK8xw.js";import T from"./D5k--mLm.js";import{q as B,e as D,r as p,j as $,c as m,b as c,a as t,g as C,w as f,i as n,x as I,o as l,d as b,f as L,k as i,v as d,U as k}from"./DYlgVOq5.js";import{u as A}from"./BZoA-2F6.js";import"./Bo_PBiFp.js";import"./Bjy1Ed27.js";import"./8hyyyOHM.js";import"./BwzGxkg-.js";import"./CBaYzeil.js";import"./DFhEUFyw.js";import"./DlAUqK2U.js";const H={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},R={class:"px-4 py-6 sm:px-0"},q={class:"flex items-center justify-between mb-8"},z={key:0,class:"flex justify-center py-8"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},G={class:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},J=["disabled"],K={key:0},O={key:1},Q={key:2,class:"text-center py-8"},ue={__name:"edit",setup(W){const h=B(),E=D(),{fetchIntervention:S,updateIntervention:V}=A(),x=h.params.id,y=p(!0),a=p(!1),w=p(null),r=p({titre:"",description:"",client_nom:"",technicien_nom:"",statut:"En attente",priorite:"Normale",date_intervention:"",date_fin:""}),N=async()=>{if(!a.value){a.value=!0;try{const o=await V({id:x,...r.value});o.success?await E.push("/interventions"):alert("Erreur lors de la mise à jour: "+(o.message||"Erreur inconnue"))}catch(o){console.error("Erreur lors de la mise à jour:",o),alert("Erreur lors de la mise à jour de l'intervention")}finally{a.value=!1}}},_=o=>{if(!o)return"";const e=new Date(o),g=e.getFullYear(),u=String(e.getMonth()+1).padStart(2,"0"),v=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),U=String(e.getMinutes()).padStart(2,"0");return`${g}-${u}-${v}T${s}:${U}`};return $(async()=>{try{const o=await S(x);o&&(w.value=o,r.value={titre:o.titre||"",description:o.description||"",client_nom:o.client_nom||"",technicien_nom:o.technicien_nom||"",statut:o.statut||"En attente",priorite:o.priorite||"Normale",date_intervention:_(o.date_intervention),date_fin:_(o.date_fin)})}catch(o){console.error("Erreur lors du chargement de l'intervention:",o)}finally{y.value=!1}}),(o,e)=>{const g=M,u=j,v=T;return l(),m("div",null,[c(g),t("main",H,[t("div",R,[t("div",q,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Modifier l'intervention"),t("p",{class:"text-gray-600"},"Modifiez les détails de l'intervention")],-1)),c(u,{to:"/interventions",class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"},{default:f(()=>e[8]||(e[8]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),b(" Retour à la liste ",-1)])),_:1,__:[8]})]),n(y)?(l(),m("div",z,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):n(w)?(l(),C(v,{key:1},{content:f(()=>[t("form",{onSubmit:L(N,["prevent"]),class:"space-y-6 p-6"},[t("div",F,[t("div",null,[e[11]||(e[11]=t("label",{for:"titre",class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Titre "),t("span",{class:"text-red-500"},"*")],-1)),i(t("input",{id:"titre","onUpdate:modelValue":e[0]||(e[0]=s=>n(r).titre=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Titre de l'intervention"},null,512),[[d,n(r).titre]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"statut",class:"block text-sm font-medium text-gray-700 mb-2"}," Statut ",-1)),i(t("select",{id:"statut","onUpdate:modelValue":e[1]||(e[1]=s=>n(r).statut=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[12]||(e[12]=[t("option",{value:"En attente"},"En attente",-1),t("option",{value:"En cours"},"En cours",-1),t("option",{value:"En pause"},"En pause",-1),t("option",{value:"Terminée"},"Terminée",-1),t("option",{value:"Annulée"},"Annulée",-1)]),512),[[k,n(r).statut]])])]),t("div",null,[e[14]||(e[14]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),i(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=s=>n(r).description=s),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description détaillée de l'intervention"},null,512),[[d,n(r).description]])]),t("div",P,[t("div",null,[e[15]||(e[15]=t("label",{for:"client_nom",class:"block text-sm font-medium text-gray-700 mb-2"}," Client ",-1)),i(t("input",{id:"client_nom","onUpdate:modelValue":e[3]||(e[3]=s=>n(r).client_nom=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nom du client"},null,512),[[d,n(r).client_nom]])]),t("div",null,[e[16]||(e[16]=t("label",{for:"technicien_nom",class:"block text-sm font-medium text-gray-700 mb-2"}," Technicien ",-1)),i(t("input",{id:"technicien_nom","onUpdate:modelValue":e[4]||(e[4]=s=>n(r).technicien_nom=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nom du technicien"},null,512),[[d,n(r).technicien_nom]])])]),t("div",Y,[t("div",null,[e[18]||(e[18]=t("label",{for:"priorite",class:"block text-sm font-medium text-gray-700 mb-2"}," Priorité ",-1)),i(t("select",{id:"priorite","onUpdate:modelValue":e[5]||(e[5]=s=>n(r).priorite=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[17]||(e[17]=[t("option",{value:"Basse"},"Basse",-1),t("option",{value:"Normale"},"Normale",-1),t("option",{value:"Haute"},"Haute",-1),t("option",{value:"Urgente"},"Urgente",-1)]),512),[[k,n(r).priorite]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"date_intervention",class:"block text-sm font-medium text-gray-700 mb-2"}," Date d'intervention ",-1)),i(t("input",{id:"date_intervention","onUpdate:modelValue":e[6]||(e[6]=s=>n(r).date_intervention=s),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,n(r).date_intervention]])]),t("div",null,[e[20]||(e[20]=t("label",{for:"date_fin",class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),i(t("input",{id:"date_fin","onUpdate:modelValue":e[7]||(e[7]=s=>n(r).date_fin=s),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,n(r).date_fin]])])]),t("div",G,[c(u,{to:"/interventions",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"},{default:f(()=>e[21]||(e[21]=[b(" Annuler ",-1)])),_:1,__:[21]}),t("button",{type:"submit",disabled:n(a),class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n(a)?(l(),m("span",K,"Sauvegarde...")):(l(),m("span",O,"Sauvegarder"))],8,J)])],32)]),_:1})):(l(),m("div",Q,[e[23]||(e[23]=I('<div class="text-red-600 mb-4"><svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">Intervention non trouvée</h3><p class="text-gray-500 mb-4">L&#39;intervention demandée n&#39;existe pas ou n&#39;est plus accessible.</p>',3)),c(u,{to:"/interventions",class:"btn-primary"},{default:f(()=>e[22]||(e[22]=[b(" Retour à la liste ",-1)])),_:1,__:[22]})]))])])])}}};export{ue as default};
