import{s as V}from"./DyNxa_Fv.js";import{r as g,E as k,l as N,c as U,o as I,a as e,b as i,i as s,s as A,f as E}from"./DYlgVOq5.js";import L from"./B20p3wMs.js";import O from"./2TbVYi8k.js";const M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={class:"space-y-4"},T={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},j={class:"md:col-span-2"},w={class:"space-y-4"},P={class:"flex items-center justify-between"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},C={__name:"ClientForm",props:{client:{type:Object,default:null}},emits:["submit","cancel"],setup(p,{emit:f}){const m=p,v=f,u=g(!1),d=g(!1),o=k({nom:"",email:"",telephone:"",adresse:"",ville:"",code_postal:"",contact_principal:"",notes:"",latitude:null,longitude:null});N(()=>m.client,t=>{t?Object.assign(o,{nom:t.nom||"",email:t.email||"",telephone:t.telephone||"",adresse:t.adresse||"",ville:t.ville||"",code_postal:t.code_postal||"",contact_principal:t.contact_principal||"",notes:t.notes||"",latitude:t.latitude||null,longitude:t.longitude||null}):Object.assign(o,{nom:"",email:"",telephone:"",adresse:"",ville:"",code_postal:"",contact_principal:"",notes:"",latitude:null,longitude:null})},{immediate:!0});const x=()=>{if(!navigator.geolocation){alert("La g√©olocalisation n'est pas support√©e par votre navigateur");return}d.value=!0,navigator.geolocation.getCurrentPosition(t=>{o.latitude=t.coords.latitude,o.longitude=t.coords.longitude,d.value=!1},t=>{console.error("Erreur de g√©olocalisation:",t);let l="Impossible d'obtenir votre position";switch(t.code){case t.PERMISSION_DENIED:l="Autorisation de g√©olocalisation refus√©e";break;case t.POSITION_UNAVAILABLE:l="Position non disponible";break;case t.TIMEOUT:l="Timeout de g√©olocalisation";break}alert(l),d.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},y=async()=>{u.value=!0;try{const t={...o};m.client?.id&&(t.id=m.client.id),t.latitude===""&&(t.latitude=null),t.longitude===""&&(t.longitude=null),v("submit",t)}finally{u.value=!1}};return(t,l)=>{const n=O,c=L,r=A,b=V;return I(),U("form",{onSubmit:E(y,["prevent"]),class:"space-y-6"},[e("div",M,[e("div",null,[l[11]||(l[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nom du client * ",-1)),i(n,{modelValue:s(o).nom,"onUpdate:modelValue":l[0]||(l[0]=a=>s(o).nom=a),type:"text",required:"",placeholder:"Nom de l'entreprise ou du particulier",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[12]||(l[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Contact principal ",-1)),i(n,{modelValue:s(o).contact_principal,"onUpdate:modelValue":l[1]||(l[1]=a=>s(o).contact_principal=a),type:"text",placeholder:"Nom du contact",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[13]||(l[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email ",-1)),i(n,{modelValue:s(o).email,"onUpdate:modelValue":l[2]||(l[2]=a=>s(o).email=a),type:"email",placeholder:"contact@client.com",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[14]||(l[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," T√©l√©phone ",-1)),i(n,{modelValue:s(o).telephone,"onUpdate:modelValue":l[3]||(l[3]=a=>s(o).telephone=a),type:"tel",placeholder:"01.23.45.67.89",class:"w-full"},null,8,["modelValue"])])]),e("div",S,[l[18]||(l[18]=e("h3",{class:"text-lg font-medium text-gray-900"},"üìç Adresse",-1)),e("div",null,[l[15]||(l[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Adresse compl√®te ",-1)),i(c,{modelValue:s(o).adresse,"onUpdate:modelValue":l[4]||(l[4]=a=>s(o).adresse=a),rows:"2",placeholder:"Num√©ro, rue, b√¢timent...",class:"w-full"},null,8,["modelValue"])]),e("div",T,[e("div",j,[l[16]||(l[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Ville ",-1)),i(n,{modelValue:s(o).ville,"onUpdate:modelValue":l[5]||(l[5]=a=>s(o).ville=a),type:"text",placeholder:"Nom de la ville",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[17]||(l[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Code postal ",-1)),i(n,{modelValue:s(o).code_postal,"onUpdate:modelValue":l[6]||(l[6]=a=>s(o).code_postal=a),type:"text",placeholder:"75001",class:"w-full"},null,8,["modelValue"])])])]),e("div",w,[e("div",P,[l[19]||(l[19]=e("h3",{class:"text-lg font-medium text-gray-900"},"üåç Coordonn√©es GPS",-1)),i(r,{type:"button",onClick:x,disabled:s(d),loading:s(d),icon:"pi pi-map-marker",label:"Ma position",severity:"info",outlined:"",size:"small"},null,8,["disabled","loading"])]),e("div",B,[e("div",null,[l[20]||(l[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Latitude ",-1)),i(b,{modelValue:s(o).latitude,"onUpdate:modelValue":l[7]||(l[7]=a=>s(o).latitude=a),step:1e-6,min:-90,max:90,placeholder:"48.856614",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[21]||(l[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Longitude ",-1)),i(b,{modelValue:s(o).longitude,"onUpdate:modelValue":l[8]||(l[8]=a=>s(o).longitude=a),step:1e-6,min:-180,max:180,placeholder:"2.352222",class:"w-full"},null,8,["modelValue"])])]),l[22]||(l[22]=e("div",{class:"text-sm text-gray-500 bg-blue-50 p-3 rounded-md"},[e("p",{class:"font-medium"},"üí° Comment obtenir les coordonn√©es GPS :"),e("ul",{class:"mt-1 list-disc list-inside space-y-1"},[e("li",null,'Cliquez sur "Ma position" pour utiliser votre localisation actuelle'),e("li",null,`Ou cherchez l'adresse sur Google Maps et cliquez droit ‚Üí "Que trouve-t-on ici ?"`),e("li",null,"Les coordonn√©es appara√Ætront en bas de l'√©cran")])],-1))]),e("div",null,[l[23]||(l[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Notes ",-1)),i(c,{modelValue:s(o).notes,"onUpdate:modelValue":l[9]||(l[9]=a=>s(o).notes=a),rows:"3",placeholder:"Informations compl√©mentaires, acc√®s sp√©cifique, etc.",class:"w-full"},null,8,["modelValue"])]),e("div",$,[i(r,{type:"button",onClick:l[10]||(l[10]=a=>t.$emit("cancel")),label:"Annuler",severity:"secondary",outlined:""}),i(r,{type:"submit",disabled:s(u),loading:s(u),label:p.client?.id?"Mettre √† jour":"Cr√©er"},null,8,["disabled","loading","label"])])],32)}}};export{C as _};
