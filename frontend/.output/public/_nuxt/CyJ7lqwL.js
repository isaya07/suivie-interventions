import{_ as R}from"./TrVZK8xw.js";import{T as F}from"./Bo_PBiFp.js";import H from"./8hyyyOHM.js";import{y as P,V as j,B as K,H as J,q as W,r as S,A as T,j as X,X as Y,c as p,o as u,a as e,h as m,b,w as g,d as _,g as w,J as A,n as k,t as v,p as O,i as r,k as E,s as Q,Y as Z,f as ee,F as te,m as oe}from"./DYlgVOq5.js";import se from"./BwzGxkg-.js";import{u as re}from"./DFhEUFyw.js";import{_ as ae}from"./DlAUqK2U.js";const ie="$s";function le(...s){const i=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(i);const[d,c]=s;if(!d||typeof d!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+d);if(c!==void 0&&typeof c!="function")throw new Error("[nuxt] [useState] init must be a function: "+c);const l=ie+d,h=P(),y=j(h.payload.state,l);if(y.value===void 0&&c){const n=c();if(K(n))return h.payload.state[l]=n,n;y.value=n}return y}const ne=()=>{const s=le("darkMode",()=>!1),i=()=>{s.value=!s.value,d(),localStorage.setItem("darkMode",s.value.toString())},d=()=>{{const l=document.documentElement;s.value?l.classList.add("my-app-dark"):l.classList.remove("my-app-dark")}},c=()=>{{const l=localStorage.getItem("darkMode");l!==null?s.value=l==="true":s.value=window.matchMedia("(prefers-color-scheme: dark)").matches,d()}};return{isDarkMode:J(s),toggleDarkMode:i,initDarkMode:c}},ce={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},ue={class:"max-w-7xl mx-auto"},de={class:"flex justify-between items-center py-3 px-4 sm:px-6 lg:px-8"},pe={class:"flex items-center"},be={class:"ml-4"},me={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},ge={class:"hidden md:block"},ve={key:1,class:"pi pi-chevron-down ml-2 text-xs"},ye={class:"flex items-center space-x-4"},xe={class:"relative"},ke={class:"font-medium"},he={class:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600"},fe={class:"font-medium text-gray-900 dark:text-gray-100"},_e={class:"text-xs"},we={key:0,class:"md:hidden border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700"},Me={class:"px-2 pt-2 pb-3 space-y-1"},Ce={__name:"AppHeader",setup(s){const{user:i,logout:d}=re(),c=W(),{isDarkMode:l,toggleDarkMode:h,initDarkMode:y}=ne(),n=S(!1),x=S(!1),L=T(()=>{const a=[{label:"Dashboard",icon:"pi pi-chart-bar",route:"/dashboard"},{label:"Interventions",icon:"pi pi-wrench",items:[[{label:"Gestion classique",items:[{label:"Toutes les interventions",route:"/interventions",icon:"pi pi-list"},{label:"Nouvelle intervention",route:"/interventions/create",icon:"pi pi-plus"}]},{label:"Interventions électriques",items:[{label:"Liste électriques",route:"/interventions/electrique",icon:"pi pi-bolt"},{label:"Nouvelle électrique",route:"/interventions/electrique/create",icon:"pi pi-plus-circle"},{label:"Tableau de bord",route:"/interventions/electrique/dashboard",icon:"pi pi-chart-pie"}]}],[{label:"Filtres rapides",items:[{label:"En cours",route:"/interventions?status=en_cours",icon:"pi pi-clock"},{label:"Terminées",route:"/interventions?status=terminee",icon:"pi pi-check"},{label:"Urgentes",route:"/interventions?priority=urgente",icon:"pi pi-exclamation-triangle"}]},{label:"Chronomètre",items:[{label:"Sessions actives",route:"/interventions/electrique/sessions",icon:"pi pi-play"},{label:"Historique temps",route:"/interventions/electrique/history",icon:"pi pi-history"}]}]]},{label:"Clients",icon:"pi pi-users",items:[[{label:"Gestion",items:[{label:"Tous les clients",route:"/clients",icon:"pi pi-list"},{label:"Nouveau client",route:"/clients/create",icon:"pi pi-plus"}]}]]}];return(i.value?.role==="admin"||i.value?.role==="manager")&&a.push({label:"Utilisateurs",icon:"pi pi-user-edit",items:[[{label:"Gestion",items:[{label:"Tous les utilisateurs",route:"/users",icon:"pi pi-list"},{label:"Nouvel utilisateur",route:"/users/create",icon:"pi pi-plus"}]}]]}),a}),$=T(()=>{const a=[{to:"/dashboard",label:"Dashboard",icon:"pi pi-chart-bar"},{to:"/interventions",label:"Interventions",icon:"pi pi-wrench"},{to:"/interventions/electrique",label:"Électriques",icon:"pi pi-bolt"},{to:"/clients",label:"Clients",icon:"pi pi-users"}];return(i.value?.role==="admin"||i.value?.role==="manager")&&a.push({to:"/users",label:"Utilisateurs",icon:"pi pi-user-edit"}),a}),D=a=>a==="/dashboard"?c.path==="/dashboard"||c.path==="/":c.path.startsWith(a),B=()=>{x.value=!x.value},U=async()=>{n.value=!1,await d()},q=a=>{a.target.closest(".relative")||(n.value=!1),!a.target.closest(".mobile-menu-button")&&!a.target.closest(".mobile-menu")&&(x.value=!1)};return X(()=>{document.addEventListener("click",q),y()}),Y(()=>{document.removeEventListener("click",q)}),(a,o)=>{const f=R,N=O,z=se,M=Q,V=H,G=F;return u(),p("header",ce,[e("div",ue,[e("div",de,[e("div",pe,[o[5]||(o[5]=e("div",{class:"flex-shrink-0"},[e("i",{class:"pi pi-cog text-blue-600 dark:text-blue-400 text-2xl"})],-1)),e("div",be,[e("h1",me,[b(f,{to:"/dashboard",class:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors"},{default:g(()=>o[4]||(o[4]=[_(" Gestion Interventions ",-1)])),_:1,__:[4]})])])]),e("div",ge,[b(z,{model:r(L),class:"!bg-transparent !border-none !shadow-none"},{start:g(()=>o[6]||(o[6]=[])),item:g(({item:t,props:C,hasSubmenu:I,root:De})=>[!I&&t.route?(u(),w(f,A({key:0,to:t.route},C.action,{class:["flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200",[D(t.route)?"text-blue-600 dark:text-gray-100 bg-blue-50 dark:bg-gray-700 shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700/50"]]}),{default:g(()=>[t.icon?(u(),p("i",{key:0,class:k([t.icon,"mr-2"])},null,2)):m("",!0),e("span",null,v(t.label),1),t.badge?(u(),w(N,{key:1,value:t.badge,size:"small",severity:"info",class:"ml-2"},null,8,["value"])):m("",!0)]),_:2},1040,["to","class"])):(u(),p("a",A({key:1},C.action,{class:"flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700/50"}),[t.icon?(u(),p("i",{key:0,class:k([t.icon,"mr-2"])},null,2)):m("",!0),e("span",null,v(t.label),1),I?(u(),p("i",ve)):m("",!0),t.badge?(u(),w(N,{key:2,value:t.badge,size:"small",severity:"info",class:"ml-2"},null,8,["value"])):m("",!0)],16))]),_:1},8,["model"])]),e("div",ye,[E(b(M,{icon:r(l)?"pi pi-sun":"pi pi-moon",outlined:"",rounded:"",size:"small",class:"!text-gray-600 dark:!text-gray-400 hover:!text-gray-800 dark:hover:!text-gray-200 !border-gray-300 dark:!border-gray-600 hover:!bg-gray-50 dark:hover:!bg-gray-700",onClick:r(h),"aria-label":r(l)?"Mode clair":"Mode sombre"},null,8,["icon","onClick","aria-label"]),[[G,r(l)?"Mode clair":"Mode sombre",void 0,{bottom:!0}]]),b(M,{icon:"pi pi-bell",text:"",rounded:"",severity:"secondary","aria-label":"Notifications"}),e("div",xe,[e("button",{onClick:o[0]||(o[0]=t=>n.value=!r(n)),class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors"},[b(V,{label:r(i)?.nom_complet?.charAt(0)||"U",class:"mr-2",size:"small",style:{"background-color":"#3b82f6",color:"white"},shape:"circle"},null,8,["label"]),e("span",ke,v(r(i)?.nom_complet||"Utilisateur"),1),e("i",{class:k(["pi pi-chevron-down",{"rotate-180":r(n)}])},null,2)]),E(e("div",{class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50 border border-gray-200 dark:border-gray-600",onClick:o[2]||(o[2]=ee(()=>{},["stop"]))},[e("div",he,[e("div",fe,v(r(i)?.nom_complet),1),e("div",_e,v(r(i)?.role),1)]),b(f,{to:"/profile",class:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:o[1]||(o[1]=t=>n.value=!1)},{default:g(()=>o[7]||(o[7]=[e("i",{class:"pi pi-user mr-2"},null,-1),_(" Mon profil ",-1)])),_:1,__:[7]}),e("button",{onClick:U,class:"block w-full text-left px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},o[8]||(o[8]=[e("i",{class:"pi pi-sign-out mr-2"},null,-1),_(" Déconnexion ",-1)]))],512),[[Z,r(n)]])]),b(M,{icon:"pi pi-bars",text:"",class:"md:hidden",onClick:B,"aria-label":"Menu"})])]),r(x)?(u(),p("div",we,[e("div",Me,[(u(!0),p(te,null,oe(r($),t=>(u(),w(f,{key:t.to,to:t.to,class:k(["block px-3 py-2 rounded-md text-base font-medium transition-colors",D(t.to)?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white dark:hover:bg-gray-600"]),onClick:o[3]||(o[3]=C=>x.value=!1)},{default:g(()=>[e("i",{class:k([t.icon,"mr-2"])},null,2),_(" "+v(t.label),1)]),_:2},1032,["to","class"]))),128))])])):m("",!0)])])}}},Le=ae(Ce,[["__scopeId","data-v-4c4ac94b"]]);export{Le as _};
