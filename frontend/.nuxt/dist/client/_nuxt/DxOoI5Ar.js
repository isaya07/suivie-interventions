import k from"./D5k--mLm.js";import V from"./C8iNwocK.js";import{u as h,e as C,r as u,c as S,b as n,w as i,o as d,a as e,t as m,f as B,g as E,h as M,n as p,i as t,s as N,d as $}from"./DYlgVOq5.js";import j from"./LeZUSfni.js";import q from"./2TbVYi8k.js";import"./Bjy1Ed27.js";import"./qGzjuHAM.js";import"./BG2qx38A.js";const z={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},A={class:"space-y-4"},D={class:"text-center text-xs text-gray-500 pb-4"},H={__name:"login",setup(T){const x=h(),f=C(),a=u(!1),o=u(""),l=u({username:"",password:""}),g=async()=>{a.value=!0,o.value="";try{const r=await x.login(l.value);r.success?await f.push("/dashboard"):o.value=r.message||"Erreur de connexion"}catch(r){o.value="Erreur de connexion",console.error(r)}finally{a.value=!1}};return(r,s)=>{const b=q,y=j,v=N,_=V,w=k;return d(),S("div",z,[n(w,{class:"w-full max-w-md"},{header:i(()=>s[2]||(s[2]=[e("div",{class:"text-center pt-6 pb-2"},[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100"},[e("i",{class:"pi pi-cog text-blue-600 text-xl"})]),e("h2",{class:"mt-4 text-2xl font-bold text-gray-900 dark:text-gray-100"}," Connexion "),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Accédez à votre espace de gestion ")],-1)])),content:i(()=>[e("form",{onSubmit:B(g,["prevent"]),class:"space-y-6 p-6"},[e("div",A,[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email ou nom d'utilisateur ",-1)),n(b,{modelValue:t(l).username,"onUpdate:modelValue":s[0]||(s[0]=c=>t(l).username=c),type:"text",required:"",placeholder:"votre@email.com ou nom_utilisateur",class:p(["w-full",{"p-invalid":t(o)}])},null,8,["modelValue","class"])]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mot de passe ",-1)),n(y,{modelValue:t(l).password,"onUpdate:modelValue":s[1]||(s[1]=c=>t(l).password=c),required:"",placeholder:"••••••••",class:p(["w-full",{"p-invalid":t(o)}]),feedback:!1,toggleMask:!0},null,8,["modelValue","class"])])]),n(v,{type:"submit",loading:t(a),label:t(a)?"Connexion...":"Se connecter",class:"w-full p-button-lg",disabled:t(a)},null,8,["loading","label","disabled"]),t(o)?(d(),E(_,{key:0,severity:"error",closable:!1},{default:i(()=>[$(m(t(o)),1)]),_:1})):M("",!0)],32)]),footer:i(()=>[e("div",D," © "+m(new Date().getFullYear())+" Système de gestion des interventions ",1)]),_:1})])}}};export{H as default};
