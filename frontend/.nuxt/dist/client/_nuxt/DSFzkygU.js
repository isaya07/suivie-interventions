import{r as u,y as h,H as o}from"./DYlgVOq5.js";const m=()=>{const n=u([]),l=u([]),s=u(!1),{$api:a}=h(),c=async()=>{s.value=!0;try{const e=await a("/users.php");e.records&&(n.value=e.records)}catch(e){console.error("Erreur lors de la récupération des utilisateurs:",e)}finally{s.value=!1}},i=async()=>{s.value=!0;try{const e=await a("/users.php?techniciens=1");e.records&&(l.value=e.records)}catch(e){console.error("Erreur lors de la récupération des techniciens:",e)}finally{s.value=!1}},d=async e=>{s.value=!0;try{const r=await a("/users.php",{method:"POST",body:e});return r.success!==!1?(await c(),{success:!0}):{success:!1,message:r.message}}catch(r){return console.error("Erreur lors de la création de l'utilisateur:",r),{success:!1,message:"Erreur de création"}}finally{s.value=!1}},f=async(e,r)=>{s.value=!0;try{const t=await a("/users.php",{method:"PUT",body:{id:e,...r}});return t.success!==!1?(await c(),{success:!0}):{success:!1,message:t.message}}catch(t){return console.error("Erreur lors de la mise à jour de l'utilisateur:",t),{success:!1,message:"Erreur de mise à jour"}}finally{s.value=!1}},p=async e=>{s.value=!0;try{const r=await a("/users.php",{method:"DELETE",body:{id:e}});return r.success!==!1?(await c(),{success:!0}):{success:!1,message:r.message}}catch(r){return console.error("Erreur lors de la suppression de l'utilisateur:",r),{success:!1,message:"Erreur de suppression"}}finally{s.value=!1}};return{users:o(n),techniciens:o(l),loading:o(s),fetchUsers:c,fetchTechniciens:i,createUser:d,updateUser:f,deleteUser:p}};export{m as u};
